
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">

    <title>firepwn</title>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
	<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='8' fill='%23fdd835'/%3E%3Ctext x='16' y='22' font-family='Roboto,Arial,sans-serif' font-size='16' font-weight='700' text-anchor='middle' fill='%231b1b1b'%3EFP%3C/text%3E%3C/svg%3E">
	<link href="styles/app.css" rel="stylesheet">

	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-functions.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-storage.js"></script>

	<script src="js/app.js"></script>
  </head>

  <body>
    <script>
      (function () {
        try {
          var storedTheme = localStorage.getItem('firepwn-theme');
          var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          if (storedTheme === 'dark' || (!storedTheme && prefersDark)) {
            document.body.classList.add('theme-dark');
          }
        } catch (e) {
          /* no-op */
        }
      })();
    </script>
    <header class="page-header">
      <div class="container">
        <a
          class="github-mark"
		  href="https://github.com/0xbigshaq/firepwn-tool"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Firepwn Tool on GitHub"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="28"
            height="28"
            viewBox="0 0 24 24"
            role="img"
            focusable="false"
          >
            <path
              fill="currentColor"
              d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.02c-3.34.73-4.04-1.61-4.04-1.61-.55-1.4-1.34-1.77-1.34-1.77-1.1-.75.08-.74.08-.74 1.22.09 1.87 1.26 1.87 1.26 1.08 1.85 2.83 1.32 3.53 1.01.11-.78.42-1.32.76-1.62-2.67-.3-5.47-1.34-5.47-5.96 0-1.32.47-2.39 1.24-3.23-.12-.3-.54-1.52.12-3.17 0 0 1.01-.32 3.3 1.23a11.42 11.42 0 0 1 6 0c2.3-1.55 3.3-1.23 3.3-1.23.66 1.65.24 2.87.12 3.17.77.84 1.24 1.91 1.24 3.23 0 4.63-2.8 5.65-5.48 5.95.43.37.81 1.1.81 2.22v3.29c0 .32.22.69.82.58A12 12 0 0 0 12 .5Z"
            />
          </svg>
        </a>
        <div class="page-credit">
          <a href="https://github.com/0xbigshaq/firepwn-tool" target="_blank" rel="noopener noreferrer">firepwn</a>
        </div>
        <button
          id="theme-toggle"
          class="btn-flat theme-toggle"
          type="button"
          aria-label="Toggle dark mode"
        >
          <i class="material-icons" aria-hidden="true">dark_mode</i>
        </button>
      </div>
    </header>

	<main role="main" class="container">
		<p class="lead"><i>Test your firebase app's authentication & authorization.</i></p>

			<!-- INIT FORM START -->
			<ul class="collapsible" id="init-collapsible">
		<li>
		<div class="collapsible-header"><i class="small material-icons">whatshot</i> Initialize </div>
		<div class="collapsible-body">
		<form id="init-form">
				<p>Enter your <a href='https://firebase.google.com/docs/web/setup#config-object' target="_blank" rel="noopener noreferrer"><i>firebaseConfig</i></a> object below:</p>

				<div class="input-field col s3">
						<input type="text" name="apiKey" id="apiKey" required />
						<label for="apiKey">apiKey</label>
				</div>
				<div class="input-field col s3">
						<input type="text" name="authDomain" id="authDomain" required />
						<label for="authDomain">authDomain</label>
				</div>
				<div class="input-field col s3">
						<input type="text" name="databaseURL" id="databaseURL" required />
						<label for="databaseURL">databaseURL</label>
				</div>
				<div class="input-field col s3">
						<input type="text" name="projectId" id="projectId" required  />
						<label for="projectId">projectId</label>
				</div>
				<div class="input-field col s3">
						<input type="text" name="storageBucket" id="storageBucket" placeholder="gs://your-bucket-name.appspot.com" />
						<label for="storageBucket">storageBucket (optional)</label>
				</div>
				<br />
				<button type="submit" name="btn-init" id="btn-init" class="btn yellow darken-2 z-depth-0">Start</button>
		</form>
			</div>
			</div>
		</li>
		</ul>
		<!-- INIT FORM END -->
	</main>
<p />
<!-- UI START -->
	<div class="container" id="ui" style="display: none;">
    <div class="row"> 
		<div class="col s9">

		<ul class="collapsible">
		<li>
			<div class="collapsible-header"><i class="small material-icons">explore</i> Firestore DB Explorer</div>
			<div class="collapsible-body">
			<form id="firestore-explorer">

					<div class="input-field col s12">
							<input type="text" name="collection_name" id="collection_name" required />
							<label for="collection_name">Collection name / Path</label>
					</div>

				<br /> 

				<div class="row">
					<div class="input-field col s6">
							<select name="op" id="op-name">
							  <option selected value="get">Get</option>
							  <option value="set">Set</option>
							  <option value="update">Update</option>
							  <option value="delete">Delete</option>
							</select>
							<label>Action</label>
					</div>

					<div class="input-field col s6">
							<input type="text" name="docId"  />
							<label for="docId">Document ID(optional)</label>
					</div>
				</div>

				<div class="row">
					<div class="input-field col s6">
							<input type="number" name="limit" value="100" min="1" max="10000" />
							<label for="limit">Limit (max documents to retrieve)</label>
					</div>
				</div>

				<div class="row">
					<div class="input-field col s6">
						<input type="text" name="sort_field" id="sort_field" placeholder="timestamp, name, createdAt, etc." />
						<label for="sort_field">Sort by Field (optional)</label>
						<span class="helper-text">Field to sort by. Requires indexing for complex queries.</span>
					</div>
					<div class="input-field col s6">
						<select name="sort_direction" id="sort_direction">
							<option value="asc" selected>Ascending (asc)</option>
							<option value="desc">Descending (desc)</option>
						</select>
						<label>Sort Direction</label>
					</div>
				</div>

				<div class="row">
					<div class="col s12">
						<h6><i class="tiny material-icons">filter_list</i> Filters (optional)</h6>
						<p class="grey-text text-darken-1">Add where() conditions to filter documents</p>
					</div>
				</div>

				<div class="row">
					<div class="input-field col s4">
						<input type="text" name="filter_field" id="filter_field" placeholder="status, createdAt, etc." />
						<label for="filter_field">Filter Field</label>
						<span class="helper-text">Field path to filter on</span>
					</div>
					<div class="input-field col s4">
						<select name="filter_op" id="filter_op">
							<option value="" selected>No Filter</option>
							<option value="==">Equal (==)</option>
							<option value="<">Less Than (<)</option>
							<option value="<=">Less Than or Equal (<=)</option>
							<option value=">">Greater Than (>)</option>
							<option value=">=">Greater Than or Equal (>=)</option>
							<option value="array-contains">Array Contains</option>
							<option value="array-contains-any">Array Contains Any</option>
							<option value="in">In Array</option>
						</select>
						<label>Filter Operator</label>
					</div>
					<div class="input-field col s4">
						<input type="text" name="filter_value" id="filter_value" placeholder="active, 2023-01-01" />
						<label for="filter_value">Filter Value</label>
						<span class="helper-text">Value to compare against (use JSON for arrays/objects)</span>
					</div>
				</div>

				<div id="op-json" style="display: none" class="input-field col s12"> <textarea name="json-input" class="materialize-textarea" style="font-family: Consolas, 'Courier New', Courier, monospace">
{
  someField: "fire",
  anotherOne: "pwn"
}</textarea> 
					<div id="merge-option" style="display: none; margin-top: 10px;">
						<label>
							<input type="checkbox" name="merge_enabled" id="merge_enabled" />
							<span>Merge with existing document (instead of overwriting)</span>
						</label>
						<p class="grey-text text-darken-1" style="font-size: 12px; margin-top: 5px;">
							When enabled, only updates specified fields. When disabled, replaces entire document.
						</p>
					</div>
				</div>

				<button type="submit" class="btn yellow darken-2 z-depth-0">Execute</button>
			</form>
			</div>
		</li>
		
		<li>
			<div class="collapsible-header"><i class="small material-icons">cloud_upload</i> Firebase Storage</div>
			<div class="collapsible-body">
				<form id="storage-explorer">
					<div class="input-field col s12">
						<input type="text" name="storage_path" id="storage_path" placeholder="path/to/file.txt" />
						<label for="storage_path">File Path (e.g., folder/file.txt)</label>
					</div>

					<div class="row">
						<div class="input-field col s6">
							<select name="storage_op" id="storage-op-name">
								<option selected value="list">List Files</option>
								<option value="upload">Upload File</option>
								<option value="download">Download File</option>
								<option value="delete">Delete File</option>
								<option value="get_metadata">Get Metadata</option>
							</select>
							<label>Action</label>
						</div>

						<div class="input-field col s6">
							<input type="number" name="storage_limit" value="100" min="1" max="1000" />
							<label for="storage_limit">List Limit (max files to retrieve)</label>
						</div>
					</div>

					<div id="storage-upload" style="display: none" class="input-field col s12">
						<div class="file-field input-field">
							<div class="btn yellow darken-2">
								<span>Choose File</span>
								<input type="file" name="file_upload" id="file_upload" />
							</div>
							<div class="file-path-wrapper">
								<input class="file-path validate" type="text" placeholder="Select a file to upload" />
							</div>
						</div>
					</div>

					<button type="submit" class="btn yellow darken-2 z-depth-0">Execute</button>
				</form>
			</div>
		</li>
		
		<li>

				<div class="collapsible-header"><i class="small material-icons">cloud</i> Cloud Functions</div>
				<div class="collapsible-body">
			<form id="invoke-cf-form">
				Invoke a Cloud Function: 
				<input type="text" id="cloud-cmd" name="cloud-cmd" placeholder="example: makeAdmin({ email: 'shaq@pwn.com', isAdmin: true })" required />

				<button type="submit" class="btn yellow darken-2 z-depth-0">Invoke</button>
			</form>
				</div>

		</li>
		</ul>
		</div>

		<div class="col s3">
			<h6> <i class="tiny material-icons">verified_user</i> Auth Service</h6>
			<span id="auth-status"> <!-- auth status is rendered here --> </span>
			<div id="auth-pane">
			<ul class="collapsible">
					<li>
					  <div class="collapsible-header"><i class="material-icons">contacts</i>Login</div>
					  <div class="collapsible-body">
						<form id='signin-form'>
						  Email: 
							<input type="text" name="email" placeholder="test@test.com" required />

						  Password:
						  <input type="password" name="password" placeholder="******" required />
						  <button type="submit"  id="signin-btn" class="btn yellow darken-2 z-depth-0">Login</button>
					    </form>
					  </div>
					</li>
					<li>
					  <div class="collapsible-header"><i class="material-icons">create</i>Register</div>
					  <div class="collapsible-body">
					<form id='signup-form'>
							Email: 
								<input type="text" class="input" name="email" placeholder="test@test.com" required />
							Password:
							<input type="password" name="password" placeholder="******" required />
							<button id="signup-btn" type="submit" class="btn yellow darken-2 z-depth-0">Sign up</button>
							</form>
					  </div>
					</li>
					<li>
					  <div class="collapsible-header"><i class="material-icons">account_circle</i>Google OAuth</div>
					  <div class="collapsible-body">
					  <form id='google-oauth-form'>
						<p>Paste an OAuth ID token captured from your app's Google sign-in flow.</p>
						<div class="input-field">
						  <textarea id="oauthIdToken" name="oauthIdToken" class="input" placeholder="eyJhbGciOi..." required></textarea>
						  <label for="oauthIdToken">oauthIdToken</label>
						</div>
						<button type="submit" id="google-oauth-btn" class="btn yellow darken-2 z-depth-0">Authenticate</button>
					  </form>
					  </div>
					</li>
				  </ul>
				</div>

				<!-- MFA Section -->
				<div id="mfa-section" class="collapsible collapsible-body" style="display: none;">
					<h6><i class="tiny material-icons">security</i> Multi-Factor Authentication</h6>
					<p id="mfa-factor-info">Enter your 6-digit verification code:</p>
					<div class="input-field">
						<input type="text" id="mfa-code" maxlength="6" pattern="[0-9]{6}" placeholder="123456" />
						<label for="mfa-code">Verification Code</label>
					</div>
					<button onclick="verifyMfaCode()" class="btn green darken-1 z-depth-0">Verify</button>
					<button onclick="cancelMfa()" class="btn red darken-1 z-depth-0">Cancel</button>
					<p><small>Check your SMS for the verification code.</small></p>
					<div id="mfa-recaptcha"></div>
				</div>
			
		  </div>
		
	  </div>
			
	  <p />
	  <div class="log-toolbar">
	    <span class="log-title">Output / log</span>
	    <div class="log-controls">
	      <button
	        type="button"
	        id="log-clear"
	        class="btn-flat log-clear-btn"
	        aria-label="Clear log entries"
	      >
	        <i class="material-icons" aria-hidden="true">delete_outline</i>
	        <span class="log-clear-text">Clear</span>
	      </button>
	    </div>
	  </div>

	  <div id='output-log' class="log-output" role="log" aria-live="polite"></div>

<!-- UI END -->

	</div>
  </body>
</html>
